import{S as se,i as le,s as ae,V as ye,C as te,e as I,Q as X,k as C,c as T,a as N,R as j,d as L,m as U,b as g,f as J,F as ne,g as D,H as E,I as B,a4 as Le,W as Se,X as we,Y as ke,z as Ee,q as M,o as q,L as Z,M as ie,O as z,w as K,x as $,y as x,B as ee,t as H,l as Q,h as Y,G as W,n as re,p as oe,U as Ae,a0 as ue,a3 as Ge,j as Ne,a2 as Ie,P as Te,T as Oe,v as Be}from"../chunks/vendor-d20115e3.js";import{u as De,v as F,l as ce,z as Me,A as Ce,B as be,q as Ue,o as fe,w as _e,j as he,C as qe,D as Je}from"../chunks/stores-cf2b4674.js";import{S as Ve,a as Pe}from"../chunks/StreamsSelect-3aa0ad19.js";const We=l=>({itemLen:l&1}),me=l=>({onItemLoad:l[7],itemLen:l[0]});function Re(l){let e,s,t,n,a,r,o,d,_,m,v,k,u,f;const h=l[11].default,i=ye(h,l,l[10],me);let c=[{class:"carousel"},l[8]],A={};for(let S=0;S<c.length;S+=1)A=te(A,c[S]);return{c(){e=I("div"),s=I("button"),t=X("svg"),n=X("path"),a=C(),r=I("div"),o=I("ul"),i&&i.c(),d=C(),_=I("button"),m=X("svg"),v=X("path"),this.h()},l(S){e=T(S,"DIV",{class:!0});var G=N(e);s=T(G,"BUTTON",{class:!0});var V=N(s);t=j(V,"svg",{style:!0,viewBox:!0});var P=N(t);n=j(P,"path",{fill:!0,d:!0}),N(n).forEach(L),P.forEach(L),V.forEach(L),a=U(G),r=T(G,"DIV",{class:!0});var p=N(r);o=T(p,"UL",{class:!0});var b=N(o);i&&i.l(b),b.forEach(L),p.forEach(L),d=U(G),_=T(G,"BUTTON",{class:!0});var w=N(_);m=j(w,"svg",{style:!0,viewBox:!0});var O=N(m);v=j(O,"path",{fill:!0,d:!0}),N(v).forEach(L),O.forEach(L),w.forEach(L),G.forEach(L),this.h()},h(){g(n,"fill","currentColor"),g(n,"d","M22,12A10,10 0 0,0 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12M14,7L9,12L14,17V7Z"),J(t,"width","24px"),J(t,"height","24px"),g(t,"viewBox","0 0 24 24"),g(s,"class","carousel__button carousel__button--left"),g(o,"class","carousel__track"),g(r,"class","carousel__track-container"),g(v,"fill","currentColor"),g(v,"d","M2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2A10,10 0 0,0 2,12M4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12M10,17L15,12L10,7V17Z"),J(m,"width","24px"),J(m,"height","24px"),g(m,"viewBox","0 0 24 24"),g(_,"class","carousel__button carousel__button--right"),ne(e,A)},m(S,G){D(S,e,G),E(e,s),E(s,t),E(t,n),l[12](s),E(e,a),E(e,r),E(r,o),i&&i.m(o,null),l[13](o),E(e,d),E(e,_),E(_,m),E(m,v),l[14](_),k=!0,u||(f=[B(s,"click",l[5]),B(_,"click",l[4]),B(e,"wheel",Le(l[6]))],u=!0)},p(S,[G]){i&&i.p&&(!k||G&1025)&&Se(i,h,S,S[10],k?ke(h,S[10],G,We):we(S[10]),me),ne(e,A=Ee(c,[{class:"carousel"},G&256&&S[8]]))},i(S){k||(M(i,S),k=!0)},o(S){q(i,S),k=!1},d(S){S&&L(e),l[12](null),i&&i.d(S),l[13](null),l[14](null),u=!1,Z(f)}}}function Xe(l,e,s){let{$$slots:t={},$$scope:n}=e,{imgDims:a}=e,r,o,d,_,m=0;const v=()=>{s(1,r.style.transform="translateX(0px)",r)},k=(p,b,w)=>{b&&(m=w,s(1,r.style.transform="translateX(-"+b.style.left+")",r),p.classList.remove("current-slide"),b.classList.add("current-slide")),w===0?(d.classList.add("hidden"),o.classList.remove("hidden")):w>=_.length-1?(d.classList.remove("hidden"),o.classList.add("hidden")):(d.classList.remove("hidden"),o.classList.remove("hidden"))},u=p=>{const b=r.querySelector(".current-slide");if(b==null){m=0;return}const w=b.nextElementSibling,O=_.findIndex(R=>R===w);O!=-1&&k(b,w,O)},f=p=>{const b=r.querySelector(".current-slide");if(b==null){m=0;return}const w=b.previousElementSibling,O=_.findIndex(R=>R===w);k(b,w,O),w==b&&(d.classlist.add("hidden"),k(b,w))},h=p=>{const b=Math.sign(p.deltaY);m=Math.max(0,Math.min(100,m+b));const w=r.querySelector(".current-slide");if(w==null){m=0;return}const O=b>0?w.nextElementSibling:w.previousElementSibling;k(w,O,m)};let i=()=>{m=0,v();const p=a.width+4;_=Array.from(r.children);const b=(w,O)=>{w.style.left=p*O+"px"};_.forEach(b)},{itemLen:c}=e,A=0;function S(){A+=1,A>=c&&i()}function G(p){z[p?"unshift":"push"](()=>{d=p,s(3,d)})}function V(p){z[p?"unshift":"push"](()=>{r=p,s(1,r)})}function P(p){z[p?"unshift":"push"](()=>{o=p,s(2,o)})}return l.$$set=p=>{s(8,e=te(te({},e),ie(p))),"imgDims"in p&&s(9,a=p.imgDims),"itemLen"in p&&s(0,c=p.itemLen),"$$scope"in p&&s(10,n=p.$$scope)},e=ie(e),[c,r,o,d,u,f,h,S,e,a,n,t,G,V,P]}class je extends se{constructor(e){super();le(this,e,Xe,Re,ae,{imgDims:9,itemLen:0})}}function de(l,e,s){const t=l.slice();return t[26]=e[s],t[28]=s,t}function pe(l){let e,s,t,n;return e=new je({props:{imgDims:l[6],itemLen:l[5].data.length,$$slots:{default:[ze,({onItemLoad:a})=>({25:a}),({onItemLoad:a})=>a?33554432:0]},$$scope:{ctx:l}}}),{c(){s=I("div"),K(e.$$.fragment),this.h()},l(a){s=T(a,"DIV",{style:!0});var r=N(s);$(e.$$.fragment,r),this.h()},h(){J(s,"display","contents"),J(s,"--carousel-height",t="calc("+l[6].height+"px + 4em)")},m(a,r){D(a,s,r),x(e,s,null),n=!0},p(a,r){const o={};r&32&&(o.itemLen=a[5].data.length),r&570425376&&(o.$$scope={dirty:r,ctx:a}),e.$set(o)},i(a){n||(M(e.$$.fragment,a),n=!0)},o(a){q(e.$$.fragment,a),n=!1},d(a){a&&L(s),ee(e,a)}}}function ge(l){let e,s,t,n,a,r,o,d=l[26].name+"",_,m=`${l[6].width}px`,v,k,u,f;function h(){return l[19](l[26])}return{c(){e=I("li"),s=I("button"),t=I("img"),o=C(),_=H(d),v=C(),this.h()},l(i){e=T(i,"LI",{class:!0});var c=N(e);s=T(c,"BUTTON",{class:!0});var A=N(s);t=T(A,"IMG",{src:!0,alt:!0,class:!0,width:!0,height:!0}),o=U(A),_=Y(A,d),A.forEach(L),v=U(c),c.forEach(L),this.h()},h(){ue(t.src,n=ce(l[26].box_art_url,l[6],!1))||g(t,"src",n),g(t,"alt","game box art"),g(t,"class","carousel__image"),g(t,"width",a=l[6].width),g(t,"height",r=l[6].height),g(s,"class","games-button svelte-1sfvt84"),J(s,"width",m,!1),g(e,"class",k="carousel__slide "+(l[28]==0?"current-slide":""))},m(i,c){D(i,e,c),E(e,s),E(s,t),E(s,o),E(s,_),E(e,v),u||(f=[B(t,"load",function(){Ge(l[25])&&l[25].apply(this,arguments)},{once:!0}),B(s,"click",h)],u=!0)},p(i,c){l=i,c&32&&!ue(t.src,n=ce(l[26].box_art_url,l[6],!1))&&g(t,"src",n),c&32&&d!==(d=l[26].name+"")&&Ne(_,d)},d(i){i&&L(e),u=!1,Z(f)}}}function ze(l){let e,s=l[5].data,t=[];for(let n=0;n<s.length;n+=1)t[n]=ge(de(l,s,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=Q()},l(n){for(let a=0;a<t.length;a+=1)t[a].l(n);e=Q()},m(n,a){for(let r=0;r<t.length;r+=1)t[r].m(n,a);D(n,e,a)},p(n,a){if(a&33554656){s=n[5].data;let r;for(r=0;r<s.length;r+=1){const o=de(n,s,r);t[r]?t[r].p(o,a):(t[r]=ge(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=s.length}},d(n){Ie(t,n),n&&L(e)}}}function ve(l){let e,s;return e=new Ve({props:{streams:l[1],uname:"",uid:"",$$slots:{default:[Fe]},$$scope:{ctx:l}}}),{c(){K(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,n){x(e,t,n),s=!0},p(t,n){const a={};n&2&&(a.streams=t[1]),n&536870938&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){s||(M(e.$$.fragment,t),s=!0)},o(t){q(e.$$.fragment,t),s=!1},d(t){ee(e,t)}}}function Fe(l){let e,s,t,n=navigator.language.substring(0,2)+"",a,r,o,d,_,m;function v(u){l[20](u)}let k={values:F,title:"sort"};return l[4]!==void 0&&(k.value=l[4]),e=new Pe({props:k}),z.push(()=>Te(e,"value",v)),e.$on("change",l[21]),{c(){K(e.$$.fragment),t=H(`
		Only lang=`),a=H(n),r=C(),o=I("input"),this.h()},l(u){$(e.$$.fragment,u),t=Y(u,`
		Only lang=`),a=Y(u,n),r=U(u),o=T(u,"INPUT",{type:!0,title:!0}),this.h()},h(){g(o,"type","checkbox"),g(o,"title","lang")},m(u,f){x(e,u,f),D(u,t,f),D(u,a,f),D(u,r,f),D(u,o,f),W(o,l[3]),d=!0,_||(m=[B(o,"change",l[22]),B(o,"change",l[10])],_=!0)},p(u,f){const h={};!s&&f&16&&(s=!0,h.value=u[4],Oe(()=>s=!1)),e.$set(h),f&8&&W(o,u[3])},i(u){d||(M(e.$$.fragment,u),d=!0)},o(u){q(e.$$.fragment,u),d=!1},d(u){ee(e,u),u&&L(t),u&&L(a),u&&L(r),u&&L(o),_=!1,Z(m)}}}function He(l){let e,s,t,n,a,r,o,d,_,m,v,k,u,f=l[5]&&l[5].data&&pe(l),h=l[1]&&l[1].data&&ve(l);return{c(){e=I("div"),s=I("h1"),t=H("Games"),n=C(),a=I("input"),r=C(),o=I("input"),d=C(),f&&f.c(),_=C(),h&&h.c(),m=Q(),this.h()},l(i){e=T(i,"DIV",{class:!0});var c=N(e);s=T(c,"H1",{});var A=N(s);t=Y(A,"Games"),A.forEach(L),n=U(c),a=T(c,"INPUT",{type:!0,placeholder:!0,class:!0}),r=U(c),o=T(c,"INPUT",{type:!0,placeholder:!0,class:!0}),c.forEach(L),d=U(i),f&&f.l(i),_=U(i),h&&h.l(i),m=Q(),this.h()},h(){g(a,"type","text"),g(a,"placeholder","Filter"),g(a,"class","games-input svelte-1sfvt84"),g(o,"type","text"),g(o,"placeholder","Search"),g(o,"class","games-input svelte-1sfvt84"),g(e,"class","flex")},m(i,c){D(i,e,c),E(e,s),E(s,t),E(e,n),E(e,a),W(a,l[2]),E(e,r),E(e,o),W(o,l[0]),D(i,d,c),f&&f.m(i,c),D(i,_,c),h&&h.m(i,c),D(i,m,c),v=!0,k||(u=[B(a,"input",l[13]),B(a,"input",l[14]),B(a,"keydown",l[15]),B(o,"input",l[16]),B(o,"input",l[17]),B(o,"keydown",l[18])],k=!0)},p(i,[c]){c&4&&a.value!==i[2]&&W(a,i[2]),c&1&&o.value!==i[0]&&W(o,i[0]),i[5]&&i[5].data?f?(f.p(i,c),c&32&&M(f,1)):(f=pe(i),f.c(),M(f,1),f.m(_.parentNode,_)):f&&(re(),q(f,1,1,()=>{f=null}),oe()),i[1]&&i[1].data?h?(h.p(i,c),c&2&&M(h,1)):(h=ve(i),h.c(),M(h,1),h.m(m.parentNode,m)):h&&(re(),q(h,1,1,()=>{h=null}),oe())},i(i){v||(M(f),M(h),v=!0)},o(i){q(f),q(h),v=!1},d(i){i&&L(e),i&&L(d),f&&f.d(i),i&&L(_),h&&h.d(i),i&&L(m),k=!1,Z(u)}}}function Qe(l,e,s){let t,n;Ae(l,De,y=>s(24,n=y));let{topGames:a}=e,{categories:r}=e;const o={width:188,height:250};let d,_,m,v="";const k=async y=>{d=y,s(1,_=await Me(`https://api.twitch.tv/helix/streams?first=100&game_id=${y}`,Ce))},u=()=>{s(5,t.data=(a?JSON.parse(JSON.stringify(a)):[]).data.filter(y=>y.name.includes(m)),t)},f=async()=>{s(11,r=await be(v))};let h=!1;const i=async()=>{const y=h?await qe(d):await Ue(n.id);s(1,_=fe(y,_e[F.indexOf(c)]))};let c=F[0];function A(){m=this.value,s(2,m)}const S=y=>he(y,u,500),G=y=>{y.key==="Escape"&&(s(2,m=""),u())};function V(){v=this.value,s(0,v)}const P=y=>he(y,f,500),p=y=>{y.key==="Escape"&&(s(0,v=""),f())},b=y=>k(y.id);function w(y){c=y,s(4,c)}const O=()=>s(1,_=fe(_,_e[F.indexOf(c)]));function R(){h=this.value,s(3,h)}return l.$$set=y=>{"topGames"in y&&s(12,a=y.topGames),"categories"in y&&s(11,r=y.categories)},l.$$.update=()=>{l.$$.dirty&6145&&s(5,t=v?JSON.parse(JSON.stringify(r)):a?JSON.parse(JSON.stringify(a)):{data:[]})},[v,_,m,h,c,t,o,k,u,f,i,r,a,A,S,G,V,P,p,b,w,O,R]}class Ye extends se{constructor(e){super();le(this,e,Qe,He,ae,{topGames:12,categories:11})}}function Ze(l){let e,s;return e=new Ye({props:{topGames:l[0],categories:l[1]}}),{c(){K(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,n){x(e,t,n),s=!0},p(t,[n]){const a={};n&1&&(a.topGames=t[0]),n&2&&(a.categories=t[1]),e.$set(a)},i(t){s||(M(e.$$.fragment,t),s=!0)},o(t){q(e.$$.fragment,t),s=!1},d(t){ee(e,t)}}}function Ke(l,e,s){let t,n;return Be(async()=>{s(0,t=await Je()),s(1,n=await be())}),[t,n]}class tt extends se{constructor(e){super();le(this,e,Ke,Ze,ae,{})}}export{tt as default};
