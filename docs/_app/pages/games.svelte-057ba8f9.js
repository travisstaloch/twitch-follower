import{S as Y,i as Z,s as z,P as x,Q as ee,a as G,d as v,b as g,f as J,g as T,H as E,K as W,V as we,C as ne,e as N,w as X,k as C,c as I,x as j,m as q,F as ie,y as F,I as O,a4 as Se,W as ke,X as Ee,Y as Ge,z as Ne,q as B,o as D,B as H,L as ae,M as re,O as K,t as te,l as se,h as le,G as R,n as oe,p as ue,U as fe,a0 as ce,a3 as Ie,j as Te,a2 as Oe,R as Be,T as De}from"../chunks/vendor-611aba13.js";import{a as Ue}from"../chunks/navigation-076a75e1.js";import{u as Ce,h as qe,j as $,n as Je,o as ye,l as Me,i as me,k as he,p as Pe,q as Ve}from"../chunks/stores-dbe2d455.js";import{t as _e,d as de}from"../chunks/util-b72d8139.js";import{S as Ae,a as Re}from"../chunks/StreamsSelect-a13bdacf.js";import"../chunks/singletons-d1fb5791.js";import"../chunks/Refresh-58a37abd.js";function We(l){let e,t;return{c(){e=x("svg"),t=x("path"),this.h()},l(s){e=ee(s,"svg",{style:!0,viewBox:!0});var n=G(e);t=ee(n,"path",{fill:!0,d:!0}),G(t).forEach(v),n.forEach(v),this.h()},h(){g(t,"fill","currentColor"),g(t,"d","M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"),J(e,"width","24px"),J(e,"height","24px"),g(e,"viewBox","0 0 24 24")},m(s,n){T(s,e,n),E(e,t)},p:W,i:W,o:W,d(s){s&&v(e)}}}class Xe extends Y{constructor(e){super();Z(this,e,null,We,z,{})}}function je(l){let e,t;return{c(){e=x("svg"),t=x("path"),this.h()},l(s){e=ee(s,"svg",{style:!0,viewBox:!0});var n=G(e);t=ee(n,"path",{fill:!0,d:!0}),G(t).forEach(v),n.forEach(v),this.h()},h(){g(t,"fill","currentColor"),g(t,"d","M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"),J(e,"width","24px"),J(e,"height","24px"),g(e,"viewBox","0 0 24 24")},m(s,n){T(s,e,n),E(e,t)},p:W,i:W,o:W,d(s){s&&v(e)}}}class Fe extends Y{constructor(e){super();Z(this,e,null,je,z,{})}}const He=l=>({itemLen:l&1}),pe=l=>({onItemLoad:l[7],itemLen:l[0]});function Qe(l){let e,t,s,n,a,r,f,m,_,d,y,k;s=new Xe({});const c=l[11].default,o=we(c,l,l[10],pe);_=new Fe({});let h=[{class:"carousel"},l[8]],u={};for(let i=0;i<h.length;i+=1)u=ne(u,h[i]);return{c(){e=N("div"),t=N("button"),X(s.$$.fragment),n=C(),a=N("div"),r=N("ul"),o&&o.c(),f=C(),m=N("button"),X(_.$$.fragment),this.h()},l(i){e=I(i,"DIV",{class:!0});var L=G(e);t=I(L,"BUTTON",{class:!0});var M=G(t);j(s.$$.fragment,M),M.forEach(v),n=q(L),a=I(L,"DIV",{class:!0});var P=G(a);r=I(P,"UL",{class:!0});var V=G(r);o&&o.l(V),V.forEach(v),P.forEach(v),f=q(L),m=I(L,"BUTTON",{class:!0});var A=G(m);j(_.$$.fragment,A),A.forEach(v),L.forEach(v),this.h()},h(){g(t,"class","carousel__button carousel__button--left"),g(r,"class","carousel__track"),g(a,"class","carousel__track-container"),g(m,"class","carousel__button carousel__button--right"),ie(e,u)},m(i,L){T(i,e,L),E(e,t),F(s,t,null),l[12](t),E(e,n),E(e,a),E(a,r),o&&o.m(r,null),l[13](r),E(e,f),E(e,m),F(_,m,null),l[14](m),d=!0,y||(k=[O(t,"click",l[5]),O(m,"click",l[4]),O(e,"wheel",Se(l[6]))],y=!0)},p(i,[L]){o&&o.p&&(!d||L&1025)&&ke(o,c,i,i[10],d?Ge(c,i[10],L,He):Ee(i[10]),pe),ie(e,u=Ne(h,[{class:"carousel"},L&256&&i[8]]))},i(i){d||(B(s.$$.fragment,i),B(o,i),B(_.$$.fragment,i),d=!0)},o(i){D(s.$$.fragment,i),D(o,i),D(_.$$.fragment,i),d=!1},d(i){i&&v(e),H(s),l[12](null),o&&o.d(i),l[13](null),H(_),l[14](null),y=!1,ae(k)}}}function Ye(l,e,t){let{$$slots:s={},$$scope:n}=e,{imgDims:a}=e,r,f,m,_,d=0;const y=()=>{t(1,r.style.transform="translateX(0px)",r),m.classList.add("hidden")},k=(b,w,S)=>{w&&(d=S,t(1,r.style.transform="translateX(-"+w.style.left+")",r),b.classList.remove("current-slide"),w.classList.add("current-slide")),S===0?(m.classList.add("hidden"),f.classList.remove("hidden")):S>=_.length-1?(m.classList.remove("hidden"),f.classList.add("hidden")):(m.classList.remove("hidden"),f.classList.remove("hidden"))},c=b=>{const w=r.querySelector(".current-slide");if(w==null){d=0;return}const S=w.nextElementSibling,U=_.findIndex(Q=>Q===S);U!=-1&&k(w,S,U)},o=b=>{const w=r.querySelector(".current-slide");if(w==null){d=0;return}const S=w.previousElementSibling,U=_.findIndex(Q=>Q===S);k(w,S,U),S==w&&(m.classlist.add("hidden"),k(w,S))},h=b=>{const w=Math.sign(b.deltaY);d=Math.max(0,Math.min(100,d+w));const S=r.querySelector(".current-slide");if(S==null){d=0;return}const U=w>0?S.nextElementSibling:S.previousElementSibling;k(S,U,d)};let u=()=>{d=0,y();const b=a.width+4;_=Array.from(r.children);const w=(S,U)=>{S.style.left=b*U+"px"};_.forEach(w)},{itemLen:i}=e,L=0;function M(){L+=1,L==i&&u()}function P(b){K[b?"unshift":"push"](()=>{m=b,t(3,m)})}function V(b){K[b?"unshift":"push"](()=>{r=b,t(1,r)})}function A(b){K[b?"unshift":"push"](()=>{f=b,t(2,f)})}return l.$$set=b=>{t(8,e=ne(ne({},e),re(b))),"imgDims"in b&&t(9,a=b.imgDims),"itemLen"in b&&t(0,i=b.itemLen),"$$scope"in b&&t(10,n=b.$$scope)},e=re(e),[i,r,f,m,c,o,h,M,e,a,n,s,P,V,A]}class Ze extends Y{constructor(e){super();Z(this,e,Ye,Qe,z,{imgDims:9,itemLen:0})}}function ge(l,e,t){const s=l.slice();return s[27]=e[t],s[29]=t,s}function ve(l){let e,t,s,n;return e=new Ze({props:{imgDims:l[6],itemLen:l[5].data.length,$$slots:{default:[ze,({onItemLoad:a})=>({26:a}),({onItemLoad:a})=>a?67108864:0]},$$scope:{ctx:l}}}),{c(){t=N("div"),X(e.$$.fragment),this.h()},l(a){t=I(a,"DIV",{style:!0});var r=G(t);j(e.$$.fragment,r),this.h()},h(){J(t,"display","contents"),J(t,"--carousel-height",s="calc("+l[6].height+"px + 4em)")},m(a,r){T(a,t,r),F(e,t,null),n=!0},p(a,r){const f={};r&32&&(f.itemLen=a[5].data.length),r&1140850720&&(f.$$scope={dirty:r,ctx:a}),e.$set(f)},i(a){n||(B(e.$$.fragment,a),n=!0)},o(a){D(e.$$.fragment,a),n=!1},d(a){a&&v(t),H(e,a)}}}function be(l){let e,t,s,n,a,r,f,m=l[27].name+"",_,d=`${l[6].width}px`,y,k,c,o;function h(){return l[19](l[27])}return{c(){e=N("li"),t=N("button"),s=N("img"),f=C(),_=te(m),y=C(),this.h()},l(u){e=I(u,"LI",{class:!0});var i=G(e);t=I(i,"BUTTON",{class:!0});var L=G(t);s=I(L,"IMG",{src:!0,alt:!0,class:!0,width:!0,height:!0}),f=q(L),_=le(L,m),L.forEach(v),y=q(i),i.forEach(v),this.h()},h(){ce(s.src,n=_e(l[27].box_art_url,l[6],!1))||g(s,"src",n),g(s,"alt","game box art"),g(s,"class","carousel__image"),g(s,"width",a=l[6].width),g(s,"height",r=l[6].height),g(t,"class","games-button svelte-1sfvt84"),J(t,"width",d,!1),g(e,"class",k="carousel__slide "+(l[29]==0?"current-slide":""))},m(u,i){T(u,e,i),E(e,t),E(t,s),E(t,f),E(t,_),E(e,y),c||(o=[O(s,"load",function(){Ie(l[26])&&l[26].apply(this,arguments)},{once:!0}),O(t,"click",h)],c=!0)},p(u,i){l=u,i&32&&!ce(s.src,n=_e(l[27].box_art_url,l[6],!1))&&g(s,"src",n),i&32&&m!==(m=l[27].name+"")&&Te(_,m)},d(u){u&&v(e),c=!1,ae(o)}}}function ze(l){let e,t=l[5].data,s=[];for(let n=0;n<t.length;n+=1)s[n]=be(ge(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=se()},l(n){for(let a=0;a<s.length;a+=1)s[a].l(n);e=se()},m(n,a){for(let r=0;r<s.length;r+=1)s[r].m(n,a);T(n,e,a)},p(n,a){if(a&67109088){t=n[5].data;let r;for(r=0;r<t.length;r+=1){const f=ge(n,t,r);s[r]?s[r].p(f,a):(s[r]=be(f),s[r].c(),s[r].m(e.parentNode,e))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(n){Oe(s,n),n&&v(e)}}}function Le(l){let e,t;return e=new Ae({props:{streams:l[1],uname:"",uid:"",$$slots:{default:[Ke]},$$scope:{ctx:l}}}),{c(){X(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,n){F(e,s,n),t=!0},p(s,n){const a={};n&2&&(a.streams=s[1]),n&1073741850&&(a.$$scope={dirty:n,ctx:s}),e.$set(a)},i(s){t||(B(e.$$.fragment,s),t=!0)},o(s){D(e.$$.fragment,s),t=!1},d(s){H(e,s)}}}function Ke(l){let e,t,s,n=navigator.language.substring(0,2)+"",a,r,f,m,_,d;function y(c){l[20](c)}let k={values:$,title:"sort"};return l[4]!==void 0&&(k.value=l[4]),e=new Re({props:k}),K.push(()=>Be(e,"value",y)),e.$on("change",l[21]),{c(){X(e.$$.fragment),s=te(`
		Only lang=`),a=te(n),r=C(),f=N("input"),this.h()},l(c){j(e.$$.fragment,c),s=le(c,`
		Only lang=`),a=le(c,n),r=q(c),f=I(c,"INPUT",{type:!0,title:!0}),this.h()},h(){g(f,"type","checkbox"),g(f,"title","lang")},m(c,o){F(e,c,o),T(c,s,o),T(c,a,o),T(c,r,o),T(c,f,o),R(f,l[3]),m=!0,_||(d=[O(f,"change",l[22]),O(f,"change",l[10])],_=!0)},p(c,o){const h={};!t&&o&16&&(t=!0,h.value=c[4],De(()=>t=!1)),e.$set(h),o&8&&R(f,c[3])},i(c){m||(B(e.$$.fragment,c),m=!0)},o(c){D(e.$$.fragment,c),m=!1},d(c){H(e,c),c&&v(s),c&&v(a),c&&v(r),c&&v(f),_=!1,ae(d)}}}function $e(l){let e,t,s,n,a,r,f,m,_,d,y,k,c,o=l[5]&&l[5].data&&ve(l),h=l[1]&&l[1].data&&Le(l);return{c(){e=N("div"),t=N("h1"),s=te("Games"),n=C(),a=N("input"),r=C(),f=N("input"),m=C(),o&&o.c(),_=C(),h&&h.c(),d=se(),this.h()},l(u){e=I(u,"DIV",{class:!0});var i=G(e);t=I(i,"H1",{});var L=G(t);s=le(L,"Games"),L.forEach(v),n=q(i),a=I(i,"INPUT",{type:!0,placeholder:!0,class:!0}),r=q(i),f=I(i,"INPUT",{type:!0,placeholder:!0,class:!0}),i.forEach(v),m=q(u),o&&o.l(u),_=q(u),h&&h.l(u),d=se(),this.h()},h(){g(a,"type","text"),g(a,"placeholder","Filter"),g(a,"class","games-input svelte-1sfvt84"),g(f,"type","text"),g(f,"placeholder","Search"),g(f,"class","games-input svelte-1sfvt84"),g(e,"class","flex")},m(u,i){T(u,e,i),E(e,t),E(t,s),E(e,n),E(e,a),R(a,l[2]),E(e,r),E(e,f),R(f,l[0]),T(u,m,i),o&&o.m(u,i),T(u,_,i),h&&h.m(u,i),T(u,d,i),y=!0,k||(c=[O(a,"input",l[13]),O(a,"input",l[14]),O(a,"keydown",l[15]),O(f,"input",l[16]),O(f,"input",l[17]),O(f,"keydown",l[18])],k=!0)},p(u,[i]){i&4&&a.value!==u[2]&&R(a,u[2]),i&1&&f.value!==u[0]&&R(f,u[0]),u[5]&&u[5].data?o?(o.p(u,i),i&32&&B(o,1)):(o=ve(u),o.c(),B(o,1),o.m(_.parentNode,_)):o&&(oe(),D(o,1,1,()=>{o=null}),ue()),u[1]&&u[1].data?h?(h.p(u,i),i&2&&B(h,1)):(h=Le(u),h.c(),B(h,1),h.m(d.parentNode,d)):h&&(oe(),D(h,1,1,()=>{h=null}),ue())},i(u){y||(B(o),B(h),y=!0)},o(u){D(o),D(h),y=!1},d(u){u&&v(e),u&&v(m),o&&o.d(u),u&&v(_),h&&h.d(u),u&&v(d),k=!1,ae(c)}}}function xe(l,e,t){let s,n;fe(l,Ce,p=>t(24,n=p)),fe(l,qe,p=>t(25,p));let{topGames:a}=e,{categories:r}=e;const f={width:188,height:250};let m,_,d,y="";const k=async p=>{m=p,t(1,_=await Je(`https://api.twitch.tv/helix/streams?first=100&game_id=${p}`))},c=()=>{t(5,s.data=(a?JSON.parse(JSON.stringify(a)):[]).data.filter(p=>p.name.includes(d)),s)},o=async()=>{t(11,r=await ye(y))};let h=!1;const u=async()=>{const p=h?await Pe(m):await Me(n.id);t(1,_=me(p,he[$.indexOf(i)]))};let i=$[0];function L(){d=this.value,t(2,d)}const M=p=>de(p,c,500),P=p=>{p.key==="Escape"&&(t(2,d=""),c())};function V(){y=this.value,t(0,y)}const A=p=>de(p,o,500),b=p=>{p.key==="Escape"&&(t(0,y=""),o())},w=p=>k(p.id);function S(p){i=p,t(4,i)}const U=()=>t(1,_=me(_,he[$.indexOf(i)]));function Q(){h=this.value,t(3,h)}return l.$$set=p=>{"topGames"in p&&t(12,a=p.topGames),"categories"in p&&t(11,r=p.categories)},l.$$.update=()=>{l.$$.dirty&6145&&t(5,s=y?JSON.parse(JSON.stringify(r)):a?JSON.parse(JSON.stringify(a)):{data:[]})},[y,_,d,h,i,s,f,k,c,o,u,r,a,L,M,P,V,A,b,w,S,U,Q]}class et extends Y{constructor(e){super();Z(this,e,xe,$e,z,{topGames:12,categories:11})}}function tt(l){let e,t;return e=new et({props:{topGames:l[0],categories:l[1]}}),{c(){X(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,n){F(e,s,n),t=!0},p(s,[n]){const a={};n&1&&(a.topGames=s[0]),n&2&&(a.categories=s[1]),e.$set(a)},i(s){t||(B(e.$$.fragment,s),t=!0)},o(s){D(e.$$.fragment,s),t=!1},d(s){H(e,s)}}}function st(l,e,t){let s,n;return Ue(async()=>{t(0,s=await Ve()),t(1,n=await ye())}),[s,n]}class ft extends Y{constructor(e){super();Z(this,e,st,tt,z,{})}}export{ft as default};
